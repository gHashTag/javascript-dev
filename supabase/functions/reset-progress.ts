import { createProgress } from "./create-progress.ts";
import { client } from "./utils/client.ts";

const supabase = client();

async function resetProgress(username: any) {
  const { data: userData, error: userError } = await supabase
    .from("users")
    .select("user_id")
    .eq("username", username);

  if (userError || userData.length === 0) {
    console.error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω:", userError);
    return; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–µ –ø—Ä–æ–¥–æ–ª–∂–∞—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
  }

  console.log(userData, "üéØ–≠—Ç–æ userData");
  // –ü–µ—Ä–µ–¥–∞–µ–º user_id –≤ createProgress
  await createProgress(userData[0].user_id);

  // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const { error } = await supabase
    .from("javascript_progress")
    .update({
      javascript_01_01: null,
      javascript_01_02: null,
      javascript_01_03: null,
      javascript_01_04: null,
      javascript_01_05: null,
      javascript_02_01: null,
      javascript_02_02: null,
      javascript_02_03: null,
      javascript_02_04: null,
      javascript_02_05: null,
      javascript_02_06: null,
      javascript_02_07: null,
      javascript_02_08: null,
      javascript_03_01: null,
      javascript_03_02: null,
      javascript_03_03: null,
      javascript_03_04: null,
      javascript_03_05: null,
      javascript_03_06: null,
      javascript_03_07: null,
      javascript_03_08: null,
      javascript_03_09: null,
      javascript_03_10: null,
      javascript_03_11: null,
      javascript_03_12: null,
      javascript_03_13: null,
      javascript_03_14: null,
      javascript_04_01: null,
      javascript_04_02: null,
      javascript_04_03: null,
      javascript_04_04: null,
      javascript_04_05: null,
      javascript_04_06: null,
      javascript_04_07: null,
      javascript_04_08: null,
      javascript_04_09: null,
      javascript_04_10: null,
      javascript_04_11: null,
      javascript_04_12: null,
      javascript_04_13: null,
      javascript_04_14: null,
      javascript_04_15: null,
      javascript_04_16: null,
      javascript_04_17: null,
      javascript_04_18: null,
      javascript_04_19: null,
      javascript_05_01: null,
      javascript_05_02: null,
      javascript_05_03: null,
      javascript_05_04: null,
      javascript_05_05: null,
      javascript_05_06: null,
      javascript_06_01: null,
      javascript_06_02: null,
      javascript_06_03: null,
      javascript_06_04: null,
      javascript_06_05: null,
      javascript_06_06: null,
      javascript_06_07: null,
      javascript_06_08: null,
      javascript_06_09: null,
      javascript_06_10: null,
      javascript_06_11: null,
      javascript_07_01: null,
      javascript_07_02: null,
      javascript_07_03: null,
      javascript_07_04: null,
      javascript_07_05: null,
      javascript_07_06: null,
      javascript_07_07: null,
      javascript_07_08: null,
      javascript_07_09: null,
      javascript_07_10: null,
      javascript_07_11: null,
      javascript_07_12: null,
      javascript_07_13: null,
      javascript_08_01: null,
      javascript_08_02: null,
      javascript_08_03: null,
      javascript_08_04: null,
      javascript_08_05: null,
      javascript_08_06: null,
      javascript_08_07: null,
      javascript_08_09: null,
      javascript_08_10: null,
      javascript_08_11: null,
      javascript_08_12: null,
      javascript_08_13: null,
      javascript_08_14: null,
      javascript_08_15: null,
      javascript_08_16: null,
      javascript_08_17: null,
      javascript_08_18: null,
      javascript_08_19: null,
      javascript_08_20: null,
      javascript_08_21: null,
      javascript_08_22: null,
      javascript_08_23: null,
      javascript_08_24: null,
      javascript_08_25: null,
      javascript_08_26: null,
      javascript_08_27: null,
      javascript_08_28: null,
      javascript_08_29: null,
      javascript_08_30: null,
      javascript_09_01: null,
      javascript_09_02: null,
      javascript_09_03: null,
      javascript_09_04: null,
      javascript_09_05: null,
      javascript_09_06: null,
      javascript_09_07: null,
      javascript_09_08: null,
      javascript_09_09: null,
      javascript_09_10: null,
      javascript_09_11: null,
      javascript_09_12: null,
      javascript_09_13: null,
      javascript_09_14: null,
      javascript_09_15: null,
      javascript_09_16: null,
      javascript_09_17: null,
      javascript_09_18: null,
      javascript_09_19: null,
      javascript_09_20: null,
      javascript_09_21: null,
      javascript_09_22: null,
      javascript_09_23: null,
      javascript_09_24: null,
      javascript_09_25: null,
      javascript_10_01: null,
      javascript_10_02: null,
      javascript_10_03: null,
      javascript_10_04: null,
      javascript_10_05: null,
      javascript_10_06: null,
      javascript_10_07: null,
      javascript_10_08: null,
      javascript_10_09: null,
      javascript_10_10: null,
      javascript_10_11: null,
      javascript_11_01: null,
      javascript_11_02: null,
      javascript_11_03: null,
      javascript_11_04: null,
      javascript_11_05: null,
      javascript_12_01: null,
      javascript_12_02: null,
      javascript_12_03: null,
      javascript_12_04: null,
      javascript_12_05: null,
      javascript_13_01: null,
      javascript_13_02: null,
      javascript_13_03: null,
      javascript_14_01: null,
      javascript_14_02: null,
      javascript_14_03: null,
      javascript_14_04: null,
      javascript_15_01: null,
      javascript_15_02: null,
      javascript_15_03: null,
      javascript_15_04: null,
      javascript_16_01: null,
      javascript_16_02: null,
      javascript_16_03: null,
      javascript_16_04: null,
      javascript_16_05: null,
      javascript_16_06: null,
      javascript_16_07: null,
      javascript_17_01: null,
      javascript_17_02: null,
      javascript_17_03: null,
      javascript_17_04: null,
      javascript_17_05: null,
      javascript_17_06: null,
      javascript_17_07: null,
      javascript_17_08: null,
      javascript_17_09: null,
      javascript_17_10: null,
      javascript_17_11: null,
      javascript_17_12: null,
      javascript_17_13: null,
      javascript_18_01: null,
      javascript_18_02: null,
      javascript_18_03: null,
      javascript_18_04: null,
      javascript_18_05: null,
      javascript_18_06: null,
      javascript_19_01: null,
      javascript_19_02: null,
      javascript_19_03: null,
      javascript_19_04: null,
      javascript_19_05: null,
      javascript_19_06: null,
      javascript_19_07: null,
      javascript_19_08: null,
      javascript_19_09: null,
      javascript_19_10: null,
      javascript_20_01: null,
      javascript_20_02: null,
      javascript_20_03: null,
      javascript_20_04: null,
      javascript_21_01: null,
      javascript_21_02: null,
      javascript_21_03: null,
      javascript_22_01: null,
      javascript_22_02: null,
      javascript_22_03: null,
      javascript_22_04: null,
      javascript_23_01: null,
      javascript_23_02: null,
      javascript_23_03: null,
      javascript_24_01: null,
      javascript_24_02: null,
      javascript_24_03: null,
      javascript_25_01: null,
      javascript_25_02: null,
      javascript_25_03: null,
      javascript_26_01: null,
      javascript_26_02: null,
      javascript_26_03: null,
      javascript_26_04: null,
      javascript_27_01: null,
      javascript_27_02: null,
      javascript_27_03: null,
      javascript_27_04: null,
      javascript_28_01: null,
      javascript_28_02: null,
      javascript_28_03: null,
      javascript_28_04: null,
      javascript_29_01: null,
      javascript_29_02: null,
      javascript_30_01: null,
    })
    .eq("user_id", userData[0].user_id);

  console.log(userData);
  if (error) {
    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:", error);
    return; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–µ –ø—Ä–æ–¥–æ–ª–∂–∞—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
  }

  console.log("–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω");

  return true;
}

// –í—ã–∑–æ–≤–∏—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
export { resetProgress };
